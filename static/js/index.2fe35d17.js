(()=>{"use strict";var e={182:function(e,t,r){var n,a=r("549"),s=r("194"),i=r("82"),o=r("831");class l extends Error{constructor(e){super(e),this.name="IDBCacheError",Object.setPrototypeOf(this,new.target.prototype)}}class c extends l{constructor(e){super(e),this.name="DatabaseError"}}class d extends l{constructor(e){super(e),this.name="CryptoError"}}class h extends l{constructor(e){super(e),this.name="WorkerInitializationError"}}class u extends l{constructor(e){super(e),this.name="EncryptionError"}}class m extends l{constructor(e){super(e),this.name="DecryptionError"}}class p extends l{constructor(e){super(e),this.name="TimeoutError"}}function f(e,t){e.forEach((r,n)=>{r.reject(new h(t)),clearTimeout(r.timer),e.delete(n)})}async function w(e,t,r,n,a,s=5e3){return new Promise((i,o)=>{let l=setTimeout(()=>{let e=n.get(t);e&&(e.reject(new p("Request timed out")),n.delete(t))},s);n.set(t,{resolve:i,reject:o,timer:l});let c=[];a&&a.length>0&&c.push(...a);try{c.length>0?e.postMessage(r,c):e.postMessage(r)}catch(r){console.error("Failed to post message to worker:",r);let e=n.get(t);e&&(clearTimeout(e.timer),e.reject(new h("Failed to communicate with the worker.")),n.delete(t));return}})}function y(){let e=Date.now(),t=(0xffffffff&e).toString(16).padStart(8,"0"),r=(e/0x100000000&65535).toString(16).padStart(4,"0"),n=(e/0x1000000000000&4095|4096).toString(16).padStart(4,"0"),a=(32768|Math.floor(16383*Math.random())).toString(16).padStart(4,"0"),s=Array.from(crypto.getRandomValues(new Uint8Array(6))).map(e=>e.toString(16).padStart(2,"0")).join("");return`${t}-${r}-${n}-${a}-${s}`}let g=new Map;async function b(e,t){let r=`${e}:${t}`;if(g.has(r)){let e=g.get(r);if("string"==typeof e)return e}let n=new TextEncoder().encode(r),a=Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",n))).map(e=>e.toString(16).padStart(2,"0")).join(""),s=[a.slice(0,8),a.slice(8,12),`4${a.slice(13,16)}`,(3&Number.parseInt(a.slice(16,17),16)|8).toString(16)+a.slice(17,20),a.slice(20,32)].join("-");return g.set(r,s),s}async function x(e){let t=new TextEncoder().encode(e);return Array.from(new Uint8Array(await crypto.subtle.digest("SHA-256",t))).map(e=>e.toString(16).padStart(2,"0")).join("")}async function v(e,t,r){let n=[],a=e.transaction(t,"readonly"),s=a.store,i=`${r}-chunk-000000-`,o=`${r}-chunk-999999\uffff`,l=IDBKeyRange.bound(i,o,!1,!1),c=await s.openKeyCursor(l);for(;c;)n.push(c.key),c=await c.continue();return await a.done,n}function k(e,t){if(!e.objectStoreNames.contains(t)){let r=e.createObjectStore(t,{keyPath:"key"});r.createIndex("byTimestamp","timestamp"),r.createIndex("byCacheBuster","cacheBuster")}}async function j(e,t,r){try{return await (0,o.X3)(e,r,{upgrade(e){k(e,t)}})}catch(n){if(n instanceof DOMException&&"VersionError"===n.name)return console.warn(`VersionError: Deleting database ${e} and retrying...`),await (0,o.Lj)(e),await (0,o.X3)(e,r,{upgrade(e){k(e,t)}});throw n}}async function I(e,t,r){let n=y();try{return await w(e,n,{requestId:n,type:"encrypt",payload:{value:t}},r,[],5e3)}catch(e){if(e instanceof h||e instanceof u||e instanceof l)throw e;throw new u(e instanceof Error?e.message:"Unknown encryption error")}}async function N(e,t,r,n){let a=y();try{return await w(e,a,{requestId:a,type:"decrypt",payload:{iv:t,ciphertext:r}},n,[t,r],5e3)}catch(e){if(e instanceof h||e instanceof m||e instanceof l)throw e;throw new m(e instanceof Error?e.message:"Unknown decryption error")}}function S(){let e=null,t=new Map,r=1e5,n=null,a=null;async function s(e){if(!a)throw Error("Fixed salt (cacheBuster) not initialized");let n=`${new TextDecoder().decode(e)}-${new TextDecoder().decode(new Uint8Array(a))}`;if(t.has(n)){let e=t.get(n);if(void 0!==e)return e}let s=await crypto.subtle.importKey("raw",e,{name:"PBKDF2"},!1,["deriveKey"]),i=await crypto.subtle.deriveKey({name:"PBKDF2",salt:a,iterations:r,hash:"SHA-256"},s,{name:"AES-GCM",length:256},!1,["encrypt","decrypt"]);return t.set(n,i),i}async function i(){if(!e)throw Error("Cache key not provided for encryption worker");try{null==n||n.postMessage({type:"ready"})}catch(t){console.error("Worker: Failed to initialize AES key:",t);let e=t instanceof Error?t.message:"Unknown initialization error";null==n||n.postMessage({type:"initError",error:e})}}async function o(t){if(!e)throw Error("Cache key not initialized");if(!a)throw Error("Fixed salt (cacheBuster) not initialized");let r=crypto.getRandomValues(new Uint8Array(12)),n=new TextEncoder,i=await s(e),o=await crypto.subtle.encrypt({name:"AES-GCM",iv:r},i,n.encode(t));return{iv:r.buffer,ciphertext:o}}async function l(t,r){if(!e)throw Error("AES key not initialized");if(!a)throw Error("Fixed salt (cacheBuster) not initialized");let n=new Uint8Array(t),i=await s(e),o=await crypto.subtle.decrypt({name:"AES-GCM",iv:n},i,r);return new TextDecoder().decode(o)}let c=[],d=1,h=0;function u(e){c.push(e),m()}async function m(){for(;h<d&&c.length>0;){let e=c.shift();e&&(h++,(async()=>{let t=performance.now();try{await e()}catch(e){console.error("Worker: Task execution error:",e)}finally{(function(e){e<40&&d<10?d++:e>80&&d>1&&d--})(performance.now()-t),h--,m()}})())}}async function p(t){var s,c,d,h,m;let{type:p,payload:f,requestId:w}=t.data;switch(p){case"initialize":{let{cacheKey:t,pbkdf2Iterations:n,cacheBuster:s}=f;e=new TextEncoder().encode(t),r=n||1e5,a=new TextEncoder().encode(s).buffer,await i()}break;case"encrypt":{;let{value:e}=f;await (s=w,c=e,void u(async()=>{try{let e=await o(c);if(!n)throw Error("MessagePort is not available");n.postMessage({requestId:s,type:"encryptResult",result:e},[e.iv,e.ciphertext])}catch(t){console.error("Worker: Encryption error:",t);let e=t instanceof Error?t.message:"Unknown encryption error";n&&n.postMessage({requestId:s,type:"error",error:e})}}))}break;case"decrypt":{;let{iv:e,ciphertext:t}=f;await (d=w,h=e,m=t,void u(async()=>{try{let e=await l(h,m);if(!n)throw Error("MessagePort is not available");n.postMessage({requestId:d,type:"decryptResult",result:e})}catch(t){console.error("Worker: Decryption error:",t);let e=t instanceof Error?t.message:"Unknown decryption error";n&&n.postMessage({requestId:d,type:"error",error:e})}}))}break;case"destroy":e&&(e.fill(0),e=null),a&&(new Uint8Array(a).fill(0),a=null),n&&(n.close(),n=null),self.close();break;default:console.warn(`Worker: Unknown message type received: ${p}. Ignoring the message.`)}}self.onmessage=function(e){let{type:t}=e.data;"init"===t&&e.ports&&e.ports.length>0&&((n=e.ports[0]).onmessage=p,n.start())}}function C(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}let E=null===(n=crypto)||void 0===n?void 0:n.subtle;var R=r("773"),B=r.n(R);function $(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r)|0;return Math.abs(t).toString(36)}let P={};function M(){return"10000000-1e3-4e3-8e3-1e11".replace(/[018]/g,e=>(Number.parseInt(e,10)^(15&crypto.getRandomValues(new Uint8Array(1))[0])>>Number.parseInt(e,10)/4).toString(16))}let D=localStorage.cacheKey;!D&&(D=M(),localStorage.cacheKey=D);let z=localStorage.cacheBuster;!z&&(z=M(),localStorage.cacheBuster=z);let A=new class e{async initWorker(e,t){if(this.workerReadyPromise)return this.workerReadyPromise;this.workerReadyPromise=new Promise((r,n)=>{var a,s,i,o;let{worker:c,port:p}=function(e,t){let r=new Blob([`(${e.toString()})()`],{type:"application/javascript"}),n=URL.createObjectURL(r),a=new Worker(n),s=new MessageChannel;return a.postMessage({type:"init"},[s.port2]),a.onmessage=()=>{URL.revokeObjectURL(n)},a.onerror=e=>{console.error("Worker encountered an error:",e.message),t("Worker encountered an error and was terminated."),a.terminate()},s.port1.onmessageerror=()=>{console.warn("MessagePort encountered a message error. Worker may have been terminated."),t("Worker was terminated unexpectedly."),s.port1.close()},{worker:a,port:s.port1}}(S,e=>{n(new h(e)),f(this.pendingRequests,e)});this.worker=c,this.port=p,a=p,s=r,i=n,o=this.pendingRequests,a.onmessage=e=>{let t=e.data;if("ready"===t.type)s();else if("initError"===t.type)i(new h(t.error)),f(o,t.error);else{var r,n,a;if("encryptResult"===(r=t).type&&"string"==typeof r.requestId){let{requestId:e,result:r}=t,n=o.get(e);n&&(clearTimeout(n.timer),n.resolve(r),o.delete(e))}else{;if("decryptResult"===(n=t).type&&"string"==typeof n.requestId){let{requestId:e,result:r}=t,n=o.get(e);n&&(clearTimeout(n.timer),n.resolve(r),o.delete(e))}else{;if("error"===(a=t).type&&"string"==typeof a.requestId){let{requestId:e,error:r}=t,n=o.get(e);if(n){let t;let a=r.toLowerCase();t=a.includes("encrypt")?new u(r):a.includes("decrypt")?new m(r):a.includes("key")?new d(r):new l(r),clearTimeout(n.timer),n.reject(t),o.delete(e)}}else console.warn("WorkerUtils: Unknown message type received. Ignoring the message.",t)}}}},a.onmessageerror=e=>{console.error("Worker encountered a message error:",e),i(new h("Worker failed to initialize")),f(o,"Worker encountered an error and was terminated."),a.close()},p.postMessage({type:"initialize",payload:{cacheKey:e,cacheBuster:t,pbkdf2Iterations:this.pbkdf2Iterations}})});try{await this.workerReadyPromise}catch(e){if(console.error("Worker failed to initialize:",e),e instanceof l)throw e;throw new h("Worker failed to initialize.")}}async flushBustedCacheItems(){try{let e=(await this.dbReadyPromise).transaction(this.storeName,"readwrite"),t=e.store.index("byCacheBuster"),r=this.cacheBuster,n=IDBKeyRange.upperBound(r,!0),a=IDBKeyRange.lowerBound(r,!0),s=async e=>{let r=await t.openCursor(e);for(;r;)this.debug&&console.debug("Deleting item with cacheBuster:",r.value.cacheBuster),await r.delete(),r=await r.continue()};await Promise.all([s(n),s(a)]),await e.done,this.debug&&console.debug("Flushed old cache items with different cacheBuster.")}catch(e){if(console.error("Error during flushBustedCacheItems:",e),e instanceof c)throw e;throw new c("Failed to flush old cache items.")}}async cleanupExpiredItems(){try{let e=(await this.dbReadyPromise).transaction(this.storeName,"readwrite"),t=e.store.index("byTimestamp"),r=Date.now(),n=await t.openCursor();for(;n;){let{timestamp:e}=n.value;if(e<=r){let t=r-e;this.debug&&console.debug(`Deleting item with timestamp ${e}. It is ${t}ms older than the expiration.`),await n.delete()}else break;n=await n.continue()}await e.done}catch(e){if(console.error("Error during cleanupExpiredItems:",e),e instanceof c)throw e;throw new c("Failed to clean up expired items.")}}async ensureWorkerInitialized(){if(!this.workerReadyPromise)throw new h("Worker is not initialized.");await this.workerReadyPromise}getPort(){if(!this.port)throw new h("Worker port is not initialized.");return this.port}async getItem(e){try{let t=Date.now();if(!this.dbReadyPromise)return null;await this.ensureWorkerInitialized();let r=await this.dbReadyPromise,n=await b(this.cacheKey,e),a=Date.now(),s=await v(r,this.storeName,n);if(this.debug&&(0===s.length?console.debug(`Cache miss for key ${e}`):console.debug(`Cache hit for key ${e}`)),0===s.length)return null;let i=[];for(let t of s){let n=await r.get(this.storeName,t);if(!n)continue;if(n.timestamp<=a)return await this.removeItem(e),null;if(n.cacheBuster!==this.cacheBuster)continue;let s=function(e){let t=e.split("-chunk-");return t.length<2?-1:Number.parseInt(t[1].split("-")[0],10)}(t);i.push({index:s,data:n})}if(0===i.length)return null;i.sort((e,t)=>e.index-t.index);let o=await Promise.all(i.map(({data:{iv:e,ciphertext:t}})=>N(this.getPort(),e,t,this.pendingRequests))),l=Date.now()-t;return this.debug&&l>200&&console.debug(`getItem for key ${e} took ${l}ms`),o.join("")}catch(t){if(t instanceof m)throw console.error(`Decryption failed for key ${e}:`,t),t;if(t instanceof c)throw console.error(`Database error while getting key ${e}:`,t),t;if(t instanceof h)throw console.error(`Worker initialization error while getting key ${e}:`,t),t;if(t instanceof l)throw console.error(`IDBCache error while getting key ${e}:`,t),t;throw console.error(`Unexpected error while getting key ${e}:`,t),new l("An unexpected error occurred.")}}async setItem(e,t){try{let s=Date.now();if(!this.dbReadyPromise)return;await this.ensureWorkerInitialized();let i=await this.dbReadyPromise,o=await b(this.cacheKey,e),l=Date.now()+this.gcTime,c=await v(i,this.storeName,o),d=new Set(c),h=new Set,u=[],m=[];for(let e=0;e<t.length;e+=this.chunkSize){var r,n,a;let s=t.slice(e,e+this.chunkSize),c=Math.floor(e/this.chunkSize),p=await x(s);let f=(r=o,n=c,a=p,`${r}-chunk-${String(n).padStart(6,"0")}-${a}`);if(h.add(f),d.has(f)){let e=await i.get(this.storeName,f);e&&e.timestamp!==l&&m.push({...e,timestamp:l,cacheBuster:this.cacheBuster})}else{let e=await I(this.getPort(),s,this.pendingRequests);u.push({chunkKey:f,encryptedChunk:{...e,cacheBuster:this.cacheBuster}})}}let p=c.filter(e=>!h.has(e)),f=i.transaction(this.storeName,"readwrite"),w=f.store,y=[];for(let e of m)y.push(w.put(e));for(let{chunkKey:e,encryptedChunk:t}of u)y.push(w.put({...t,key:e,timestamp:l}));for(let e of p)y.push(w.delete(e));await Promise.all(y),await f.done;let g=Date.now()-s;this.debug&&g>200&&console.debug(`setItem for key ${e} took ${g}ms`)}catch(e){if(e instanceof h)throw console.error("Worker port is not initialized:",e),e;if(e instanceof c)throw console.error("Database error in setItem:",e),e;if(e instanceof u)throw console.error("Encryption error in setItem:",e),e;if(e instanceof l)throw console.error("IDBCache error in setItem:",e),e;throw console.error("Unexpected error in setItem:",e),new l("An unexpected error occurred during setItem.")}}async removeItem(e){try{let t=await this.dbReadyPromise,r=await b(this.cacheKey,e),n=await v(t,this.storeName,r),a=t.transaction(this.storeName,"readwrite"),s=a.store,i=n.map(e=>s.delete(e));await Promise.all(i),await a.done}catch(e){if(console.error("Error in removeItem:",e),e instanceof c||e instanceof l)throw e;throw new c("Failed to remove item from the cache.")}}destroy(){void 0!==this.cleanupIntervalId&&clearInterval(this.cleanupIntervalId),this.pendingRequests.forEach((e,t)=>{e.reject(new l("IDBCache instance is being destroyed.")),this.pendingRequests.delete(t)}),this.port&&(this.port.postMessage({type:"destroy"}),this.port.close(),this.port=null),this.worker&&(this.worker.terminate(),this.worker=null),this.workerReadyPromise=null}constructor(e){C(this,"dbReadyPromise",void 0),C(this,"storeName",void 0),C(this,"worker",null),C(this,"port",null),C(this,"pendingRequests",void 0),C(this,"workerReadyPromise",null),C(this,"gcTime",void 0),C(this,"cleanupIntervalId",void 0),C(this,"cacheKey",void 0),C(this,"chunkSize",void 0),C(this,"cleanupInterval",void 0),C(this,"pbkdf2Iterations",void 0),C(this,"cacheBuster",void 0),C(this,"debug",void 0);let{cacheKey:t,cacheBuster:r,debug:n=!1,dbName:a="idb-cache",gcTime:s=6048e5,chunkSize:i=25e3,cleanupInterval:o=6e4,pbkdf2Iterations:l=1e5}=e;if(this.storeName="cache",this.cacheKey=t,this.debug=n,this.gcTime=s,this.chunkSize=i,this.cleanupInterval=o,this.pbkdf2Iterations=l,this.cacheBuster=r,this.pendingRequests=new Map,!window.indexedDB)throw new c("IndexedDB is not supported.");if(!E)throw new d("Web Crypto API not available in this environment");this.dbReadyPromise=j(a,this.storeName,1),this.cleanupIntervalId=window.setInterval(this.cleanupExpiredItems.bind(this),this.cleanupInterval),this.initWorker(t,r).then(()=>{this.cleanupExpiredItems().catch(e=>console.error("Initial cleanup failed:",e)),this.flushBustedCacheItems().catch(e=>console.error("Failed to flush old cache items:",e))}).catch(e=>{console.error("Worker initialization failed:",e)})}}({cacheKey:D,cacheBuster:z,debug:!0}),W=Number.parseInt(localStorage.getItem("numItems")||String(1))||1,T=Number.parseInt(localStorage.getItem("itemSize")||String(10240))||10240,U=document.getElementById("root");U&&i.createRoot(U).render((0,a.jsx)(s.StrictMode,{children:(0,a.jsx)(()=>{let[e,t]=(0,s.useState)(null),[r,n]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),[l,c]=(0,s.useState)(null),[d,h]=(0,s.useState)(W),[u,m]=(0,s.useState)(T),[p,f]=(0,s.useState)(!1),[w,y]=(0,s.useState)(!1),g=(0,s.useCallback)(async()=>{console.time("generating content"),f(!0);let e=Array.from({length:d},(e,t)=>(function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=`${e}-${r}`;if(P[n])return P[n];let a=B().create(r),s=Math.ceil(e),i=Array(s);for(let e=0;e<s;e++)i[e]=String.fromCharCode(33+Math.floor(94*a.random()));let o=i.join("");for(;t=o,new TextEncoder().encode(t).length>e;)o=o.slice(0,-1);return P[n]=o,o})(u,`${z}-${t}`));console.timeEnd("generating content");let r=performance.now();for(let t=0;t<d;t++)await A.setItem(`item-${t}`,e[t]);o(performance.now()-r),t($(e.join(""))),f(!1)},[d,u]),b=(0,s.useCallback)(async()=>{y(!0);let e=[],t=performance.now();for(let t=0;t<d;t++){let r=await A.getItem(`item-${t}`);e.push(r)}c(performance.now()-t),n(e.length>0?$(e.join("")):null),y(!1)},[d]);return(0,s.useEffect)(()=>{requestAnimationFrame(()=>{g().then(()=>{requestAnimationFrame(()=>{b()})})})},[]),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("a",{href:"https://github.com/instructure/idb-cache","aria-label":"View source on GitHub",children:[(0,a.jsxs)("svg",{width:80,height:80,viewBox:"0 0 250 250",style:{fill:"#151513",color:"#fff",position:"absolute",top:0,border:0,right:0},"aria-hidden":"true",children:[(0,a.jsx)("path",{d:"M0,0 L115,115 L130,115 L142,142 L250,250 L250,0 Z"}),(0,a.jsx)("path",{d:"M128.3,109.0 C113.8,99.7 119.0,89.6 119.0,89.6 C122.0,82.7 120.5,78.6 120.5,78.6 C119.2,72.0 123.4,76.3 123.4,76.3 C127.3,80.9 125.5,87.3 125.5,87.3 C122.9,97.6 130.6,101.9 134.4,103.2",fill:"currentColor",style:{transformOrigin:"130px 106px"},className:"octo-arm"}),(0,a.jsx)("path",{d:"M115.0,115.0 C114.9,115.1 118.7,116.5 119.8,115.4 L133.7,101.6 C136.9,99.2 139.9,98.4 142.2,98.6 C133.8,88.0 127.5,74.4 143.8,58.0 C148.5,53.4 154.0,51.2 159.7,51.0 C160.3,49.4 163.2,43.6 171.4,40.1 C171.4,40.1 176.1,42.5 178.8,56.2 C183.1,58.6 187.2,61.8 190.9,65.4 C194.5,69.0 197.7,73.2 200.1,77.6 C213.8,80.2 216.3,84.9 216.3,84.9 C212.7,93.1 206.9,96.0 205.4,96.6 C205.1,102.4 203.0,107.8 198.3,112.5 C181.9,128.9 168.3,122.5 157.7,114.1 C157.9,116.9 156.7,120.9 152.7,124.9 L141.0,136.5 C139.8,137.7 141.6,141.9 141.8,141.8 Z",fill:"currentColor",className:"octo-body"})]}),(0,a.jsx)("span",{style:{position:"absolute",left:"-9999px"},children:"View source on GitHub"})]}),(0,a.jsx)("div",{className:"min-h-screen bg-gray-50 p-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto p-6 bg-white shadow-md rounded-lg",children:[(0,a.jsx)("h1",{className:"text-4xl font-bold text-center text-primary mb-6",children:"@instructure/idb-cache"}),(0,a.jsxs)("form",{children:[(0,a.jsxs)("fieldset",{className:"border border-gray-300 rounded-lg p-4 mb-6",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700",children:"Test Configuration"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Cache key: ",(0,a.jsx)("code",{className:"text-sm",children:D})]}),(0,a.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>{localStorage.removeItem("cacheKey"),window.location.reload()},children:"Reset"})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("span",{children:["Cache buster (salt):"," ",(0,a.jsx)("code",{className:"text-sm",children:z})]}),(0,a.jsx)("button",{type:"button",className:"btn btn-sm",onClick:()=>{localStorage.removeItem("cacheBuster"),window.location.reload()},children:"Reset"})]})]})]}),(0,a.jsxs)("fieldset",{className:"border border-gray-300 rounded-lg p-4 mb-6",children:[(0,a.jsx)("legend",{className:"text-lg font-semibold text-gray-700",children:"Performance Test"}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsx)("div",{className:"form-control",children:(0,a.jsxs)("label",{className:"label",children:[(0,a.jsx)("span",{className:"label-text font-medium",children:"Size of each item (kb):"}),(0,a.jsx)("input",{autoFocus:!0,className:"input input-bordered w-full max-w-xs",type:"number",value:Math.round(u/1024),onChange:e=>{m(1024*Number(e.target.value)),localStorage.setItem("itemSize",String(1024*Number.parseInt(e.target.value)))}})]})}),(0,a.jsx)("div",{className:"form-control",children:(0,a.jsxs)("label",{className:"label",children:[(0,a.jsx)("span",{className:"label-text font-medium",children:"Number of items:"}),(0,a.jsx)("input",{className:"input input-bordered w-full max-w-xs",type:"number",value:d,onChange:e=>{h(Number(e.target.value)),localStorage.setItem("numItems",e.target.value)}})]})}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("button",{className:"btn btn-primary",type:"button",onClick:g,children:["Encrypt and store",(0,a.jsx)("span",{className:"loading loading-spinner",style:{visibility:p?"visible":"hidden"}})]}),(0,a.jsxs)("div",{className:"stats shadow",children:[(0,a.jsx)("div",{className:"stat place-items-center",style:{visibility:e?"visible":"hidden"},children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"stat-title",children:"Took"}),(0,a.jsx)("div",{className:"stat-value",children:null!==i?`${Math.round(i)} ms`:"N/A"}),(0,a.jsx)("div",{className:"stat-desc",children:"to encrypt and store"})]})}),(0,a.jsx)("div",{className:"stat place-items-center",style:{visibility:e?"visible":"hidden"},children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"stat-title",children:"Hash"}),(0,a.jsx)("div",{className:"stat-value",children:e}),(0,a.jsx)("div",{className:"stat-desc",children:"of data"})]})})]})]}),(0,a.jsxs)("div",{className:"flex flex-col gap-4",children:[(0,a.jsxs)("button",{className:"btn btn-secondary",type:"button",onClick:b,children:["Retrieve and decrypt",(0,a.jsx)("span",{className:"loading loading-spinner",style:{visibility:w?"visible":"hidden"}})]}),(0,a.jsxs)("div",{className:"stats shadow",children:[(0,a.jsx)("div",{className:"stat place-items-center",style:{visibility:r?"visible":"hidden"},children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"stat-title",children:"Took"}),(0,a.jsx)("div",{className:"stat-value",children:null!==l?`${Math.round(l)} ms`:"error"}),(0,a.jsx)("div",{className:"stat-desc",children:"to retrieve and decrypt"})]})}),(0,a.jsx)("div",{className:"stat place-items-center",style:{visibility:r?"visible":"hidden"},children:(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("div",{className:"stat-title",children:"Hash"}),(0,a.jsx)("div",{className:"stat-value",children:r}),(0,a.jsx)("div",{className:"stat-desc",children:"of data"})]})})]})]})]})]})]})]})})]})},{})}))}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var s=t[n]={exports:{}};return e[n](s,s.exports,r),s.exports}r.m=e,r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,{a:t}),t},r.d=function(e,t){for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},(()=>{var e=[];r.O=function(t,n,a,s){if(n){s=s||0;for(var i=e.length;i>0&&e[i-1][2]>s;i--)e[i]=e[i-1];e[i]=[n,a,s];return}for(var o=1/0,i=0;i<e.length;i++){for(var n=e[i][0],a=e[i][1],s=e[i][2],l=!0,c=0;c<n.length;c++)(!1&s||o>=s)&&Object.keys(r.O).every(function(e){return r.O[e](n[c])})?n.splice(c--,1):(l=!1,s<o&&(o=s));if(l){e.splice(i--,1);var d=a();void 0!==d&&(t=d)}}return t}})(),r.rv=function(){return"1.1.1"},(()=>{var e={980:0};r.O.j=function(t){return 0===e[t]};var t=function(t,n){var a=n[0],s=n[1],i=n[2],o,l,c=0;if(a.some(function(t){return 0!==e[t]})){for(o in s)r.o(s,o)&&(r.m[o]=s[o]);if(i)var d=i(r)}for(t&&t(n);c<a.length;c++)l=a[c],r.o(e,l)&&e[l]&&e[l][0](),e[l]=0;return r.O(d)},n=self.webpackChunkidb_cache_app=self.webpackChunkidb_cache_app||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.ruid="bundler=rspack@1.1.1";var n=r.O(void 0,["361","29"],function(){return r("182")});n=r.O(n)})();